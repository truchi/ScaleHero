{"version":3,"sources":["components/instrument/BoxMask/styles.module.scss","components/instrument/Box/styles.module.scss","components/instrument/Guitar/styles.module.scss","components/instrument/Layer/styles.module.scss","components/instrument/String/styles.module.scss","components/instrument/BoxUnit/styles.module.scss","registerServiceWorker.js","polyfills.js","lib/music/base.js","lib/music/Note.js","lib/music/Interval.js","lib/music/Scale.js","lib/utils/settable.js","lib/instrument/Mask.js","lib/instrument/Instrument.js","lib/rcv/index.js","components/instrument/BoxMask/index.js","store/selectors.js","components/instrument/BoxUnit/index.js","components/instrument/Box/index.js","components/instrument/String/index.js","components/instrument/Layer/index.js","components/instrument/Guitar/index.js","components/App.js","lib/utils/cleanNilsRecurs.js","store/reducer.js","lib/polygon/Point.js","lib/polygon/Polygon.js","lib/polygon/Rectangle.js","lib/polygon/Triangle.js","lib/polygon/Mask.js","store/index.js","index.js"],"names":["module","exports","_easing","from","to","mask","_box-width","_box-height","_box-gap","box","svg","guitar","layer","_string-gap","string","unit","isLocalhost","Boolean","window","location","hostname","match","register","navigator","URL","process","origin","addEventListener","swUrl","concat","fetch","then","response","status","headers","get","indexOf","serviceWorker","ready","registration","unregister","reload","registerValidSW","catch","console","log","checkValidServiceWorker","onupdatefound","installingWorker","installing","onstatechange","state","controller","error","fromEntries","reduce","o","_ref","_ref2","Object","slicedToArray","key","val","merge","defineProperty","__D","_len","arguments","length","args","Array","_key","arg","_console","apply","base","VALUES","NAMES","invertObj","name","value","mathMod","add","curry","uncurryN","v","compose","plus","Note","Cb","C","C#","Db","D","D#","Eb","E","E#","Fb","F","F#","Gb","G","G#","Ab","A","A#","Bb","B","B#","Interval","1","b2","2","#2","b3","3","b4","4","#4","b5","5","#5","b6","6","bb7","b7","7","Scale","root","note","find","equals","__","settable","_ref$DEFAULTS","DEFAULTS","_ref$validate","validate","_","_ref$Base","Base","_class","classCallCheck","this","_ref$prefix","prefix","_ref$after","after","_Base","_class2","props","_this","possibleConstructorReturn","getPrototypeOf","call","set","inherits","createClass","_this2","object","entries","forEach","_ref3","undefined","valid","Error","_ref4","_ref5","insidePairs","i","any","and","zipWith","gte","lte","insidePair","inside","j","defaultTo","prop","instrument_Mask","tuning","N","flatObject","s","charAt","toUpperCase","slice","objectSpread","rcv","element","_temp","_Component","_getPrototypeOf2","css","styles","$","findDOMNode","assertThisInitialized","getStyles","style","setProperty","isArray","React","cloneElement","Component","displayName","type","react_default","a","createElement","Rect","Polygon","connect","duration","id","animate","_ref$radiuses","radiuses","_id","url","cpu","clipPathUnits","masks","map","points","shape","width","$enter","useRef","$leave","useEffect","current","classList","remove","setTimeout","angle","assign","clipPath","className","radius","x","y","height","BoxMask_Polygon","enter","ref","leave","defaults","color","BoxUnit","clip","BoxUnit_Rect","_ref6","_ref7","getNote","_getLayer","_ref8","_ref9","layers","boxMasks","layerMasks","palettes","scales","evolve","boxMask","nth","palette","scale","getLayer","MAX","Mask","indexRef","units","fill","hasPrevRef","hasPrev","prev","index","prevRadius","syncedRadius","Math","min","BoxMask","applySpec","range","Box","instrument_String","Layer","App","Guitar","cleanNilsRecurs","when","is","pipe","reject","isNil","assocPathReduce","path","assocPath","cleanNilsReduce","over","lensPath","reducers","next","Point","_ref$x","_ref$y","clone","coord","vector","translate","opposite","axis","center","rad","PI","cos","sin","d","round","precision","pow","size","fn","point","px","py","cx","cy","rotate","inverse","transform","sep","x1","y1","x2","y2","x3","y3","x4","y4","b","den","first","_this$points$reduce","carry","minX","maxX","max","minY","maxY","toString","join","polygon","I","cropLine","p1","p2","pos","J","xI","yI","xJ","yJ","jPos","iIns","jIns","push","intersection","Rectangle","Triangle","e","sq2","sqrt","far","mid","diag","SHAPES","rect","_constructor","top","horizontal","bottom","left","vertical","right","topleft","topright","bottomleft","bottomright","diamond","diagasc","diagdesc","triangle","TRANSITIONS","east","northeast","north","northwest","west","southwest","south","southeast","SUBTYPES","data","keys","filter","subtype","transition","_shape","_getShape","crop","_getAngle","_get","w","start","boundingBox","bb","tl","br","getSize","TYPES","includes","_type","_subtype","constructor","_size","_Object$assign","_transition","intervals","ind","initial","Infinity","store","createStore","payload","identity","__REDUX_DEVTOOLS_EXTENSION__","dispatch","roots","intervalID","setInterval","arr","shift","ReactDOM","render","es","document","getElementById","registerServiceWorker"],"mappings":"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","file":"static/js/main.f8fe47c8.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"_easing\":\"cubic-bezier(0.55, 0.085, 0.68, 0.53)\",\"from\":\"styles_from__22-tw\",\"to\":\"styles_to__1yw1z\",\"mask\":\"styles_mask__24QPn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"_box-width\":\"80px\",\"_box-height\":\"60px\",\"_box-gap\":\"3px\",\"box\":\"styles_box__21Xs3\",\"svg\":\"styles_svg__Yxu0h\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"guitar\":\"styles_guitar__2U1I8\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"layer\":\"styles_layer__2ofB7\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"_box-height\":\"60px\",\"_string-gap\":\"3px\",\"string\":\"styles_string__3pKZ1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"unit\":\"styles_unit__2dF8e\"};","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport default function register() {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Lets check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl);\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.');\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import {\n  merge,\n  reduce,\n} from 'ramda'\n\n//** Logs scoped arguments and own argument and returns own argument\n//:: (...args) -> arg -> arg\nconst debug =\n  (...args) =>\n    arg =>\n      console.log(...args, arg) || arg\n\n// Retuns an object from entries ([[key, val], ...])\n//:: Array entries -> Object o\nconst fromEntries =\n  reduce(\n    (o, [key, val]) =>\n      merge(o, { [key]: val }),\n    {}\n  )\n\n//--\n//   Patches\n//--\nObject.fromEntries = fromEntries\nwindow.__D = debug\n","import {\n  add as plus,\n  compose,\n  curry,\n  invertObj,\n  mathMod,\n  uncurryN,\n} from 'ramda'\n\n//--\n//   Mixin for Note and Interval\n//\n//   @see ./Note.js, ./Interval.js\n//--\n\n//** Number of notes in octave\n//:: Number\nconst N = 12\n\nexport default VALUES => {\n  //** Name to value mapping\n  //:: Object Number\n  // VALUES\n\n  //** Value to name mapping\n  //   (last name found in VALUES for value is prefered)\n  //:: Array String\n  const NAMES = invertObj(VALUES)\n\n  //** Returns name of value\n  //:: Number value -> String name\n  const name =\n    value =>\n      NAMES[mathMod(value, N)]\n\n  //** Returns value of name\n  //:: String name -> Number value\n  const value =\n    name =>\n      VALUES[name]\n\n  //** Returns name of name + value\n  //:: Number value -> String name -> String newName\n  const add = curry(uncurryN(2,\n    v =>\n      compose(\n        name,    // get name of\n        plus(v), // value plus\n        value    // name's value\n      )\n  ))\n\n  return {\n    VALUES,\n    NAMES,\n    name,\n    value,\n    add,\n  }\n}\n\n","import base from './base'\n\n//--\n//   A note is a String denoting its name\n//   in the form: A|B|C|D|E|F|G[b|#]\n//\n//   Its value is the corresponding number\n//   of semitone(s) for name\n//\n//   @examples 'C', 'G#', 'Bb'\n//\n//   @see ./base.js\n//--\n\nconst Note = base({\n  'Cb': 11, 'C':  0, 'C#':  1,\n  'Db':  1, 'D':  2, 'D#':  3,\n  'Eb':  3, 'E':  4, 'E#':  5,\n  'Fb':  4, 'F':  5, 'F#':  6,\n  'Gb':  6, 'G':  7, 'G#':  8,\n  'Ab':  8, 'A':  9, 'A#': 10,\n  'Bb': 10, 'B': 11, 'B#':  0,\n})\n\nexport default Note\n","import base from './base'\n\n//--\n//   An interval is a String denoting its name\n//   in the form: 1|2|3|4|5|6|7[bb|b|#]\n//\n//   Its value is the corresponding number\n//   of semitone(s) for name\n//\n//   @examples '1', '#2', 'bb7'\n//\n//   @see ./base.js\n//--\n\nconst Interval = base({\n                      '1':  0,\n            'b2':  1, '2':  2, '#2': 3,\n            'b3':  3, '3':  4,\n            'b4':  4, '4':  5, '#4': 6,\n            'b5':  6, '5':  7, '#5': 8,\n            'b6':  8, '6':  9,\n  'bb7': 9, 'b7': 10, '7': 11,\n})\n\nexport default Interval\n","import Note     from './Note'\nimport Interval from './Interval'\nimport {\n  __,\n  compose,\n  equals,\n  find,\n  map,\n} from 'ramda'\n\n//--\n//   A scale is an Array Interval\n//\n//   @example ['1', '2', 'b3', '4', '5', 'b6', 'b7']\n//\n//   @see ./Interval.js\n//--\n\n//** Returns notes of intervals to root\n//:: String root -> Array String intervals -> Array String notes\nconst notes =\n  root =>\n    map(                    // for each interval\n      compose(\n        Note.add(__, root), // add to root the\n        Interval.value      // interval's value\n      )\n    )\n\n//** Returns interval from intervals which gives note to root\n//   or undefined when note is not in scale with root\n//:: String root -> String note -> Scale scale -> String? interval\nconst getInterval =\n  root =>\n    note =>\n      find(                         // first scale's interval where\n        compose(\n          equals(Note.value(note)), // note's value equals\n          Note.value,               // value of\n          Note.add(__, root),       // root plus\n          Interval.value            // interval's value\n        )\n      )\n\nexport default {\n  notes,\n  getInterval,\n}\n","export default ({\n  DEFAULTS = {},\n  validate = _ => true,\n  Base = class {},\n  prefix = '_',\n  after = null,\n}) => class extends Base {\n  constructor(props) {\n    super()\n    this.set(props)\n  }\n\n  set(props) {\n    const object = {}\n    Object.entries(DEFAULTS)\n      .forEach(([name, value]) =>\n        object[name] = [props[name], this[prefix + name], value].find(value => value !== undefined)\n      )\n\n    let valid = validate(object)\n    if (valid === false || valid === null)\n      throw new Error('Invalid props', props)\n\n    if (valid === true || valid === undefined)\n      valid = object\n\n    Object.entries(valid)\n        .forEach(([name, value]) => this[prefix + name] = value)\n\n    after && this[after] && this[after]()\n\n    return this\n  }\n}\n","import {\n  and,\n  any,\n  apply,\n  call,\n  compose,\n  defaultTo,\n  gte,\n  lte,\n  prop,\n  zipWith,\n} from 'ramda'\n\n//--\n//   A pair is an Array Number\n//   A mask is an Array Array Pair\n//\n//   Specifically, it is a collection of [lower, upper] pair list\n//\n//   A number is inside a pair\n//   if it satisfies:\n//   lower <= number <= upper\n//\n//   A number is inside a pair list\n//   if it is inside at least one of the pairs\n\n//   A pair of numbers (i, j) are inside the mask\n//   if j is inside the ith pair list\n//\n//   +/-Infinity are valid bounds\n//\n//   @example [\n//     [[-Infinity, Infinity]],\n//     [[1, 3], [7, 9], [13, 15]]\n//   ]\n//--\n\n//** Returns wether i is in pair\n//:: Number i, Pair pair -> Boolean inside\nconst insidePair =\n  i =>\n    compose(\n      apply(and),  // both\n      zipWith(\n        call,\n        [\n          gte(i),  // i >= lower bound\n          lte(i)   // i <= upper bound\n        ]\n      )\n    )\n\n//** Returns wether i is in at least one of the pairs\n//:: Number i -> Array Pair pairs -> Boolean inside\nconst insidePairs =\n  i =>\n    any(insidePair(i))\n\n//** Returns wether j is in mask's ith pair list\n//:: Number i, Number j, Mask mask -> Boolean inside\nconst inside =\n  i =>\n    j =>\n      compose(insidePairs(j), defaultTo([]), prop(i))\n\n//** Returns wether j is in any masks's ith pair list\n//:: Number i -> Number j -> Array masks -> Boolean inside\nconst insideAny =\n  i =>\n    j =>\n      compose(any(inside(i)(j)), defaultTo([]))\n\nexport default {\n  inside,\n  insideAny,\n}\n","import settable from '../utils/settable'\nimport { Note } from '../music'\nimport Mask from './Mask'\n\nconst DEFAULTS = {\n  tuning: [],\n  from  : 0,\n  to    : Note.N\n}\nconst validate = ({ from, to }) => {\n  if (from > to)\n    throw new Error(`from (${ from }) is geater than to (${ to })`)\n}\n\nexport default class Instrument extends settable({ DEFAULTS, validate }) {\n  _tuning\n  _from\n  _to\n\n  constructor({ tuning, from, to } = {}) {\n    super({ tuning, from, to })\n  }\n\n  get length() {\n    return this._to - this._from + 1\n  }\n\n  strings({ masks = [], cb = _ => _ }) {\n    return [...this._tuning]\n      .map((note, index) => ({\n        stringIndex: index,\n        stringNote : note\n      }))\n      .map(({ stringIndex, stringNote }) => ({\n        boxes: Array.from(\n          Array(this.length),\n          (v, boxIndex) => cb({\n            note  : stringNote.add(Note.value(this._from + boxIndex)),\n            inside: Mask.inside(masks, stringIndex, boxIndex)\n          })\n        )\n      }))\n  }\n}\n","import React, { Component } from 'react'\nimport { findDOMNode } from 'react-dom'\n\nconst capitalize = s => s.charAt(0).toUpperCase() + s.slice(1)\nconst flatObject = (o, prefix = '') =>\n  Object.entries(o)\n    .reduce((o, [key, value]) => {\n      prefix && (key = prefix + capitalize(key))\n\n      if (value === null || value === undefined)\n        return { ...o, [key]: null }\n\n      return typeof value === 'object'\n           ? { ...o, ...flatObject(value, key) }\n           : { ...o, [key]: value }\n    }, {})\n\nexport default element =>\n  class extends Component {\n    static displayName = `RCV(${ element.type })`\n\n    componentDidMount() {\n      this.css()\n    }\n\n    componentDidUpdate() {\n      this.css()\n    }\n\n    getStyles(styles) {\n      if (styles) return styles\n\n      styles = this.props.rcv\n\n      if (Array.isArray(styles))\n        styles = styles[0]\n\n      return styles || {}\n    }\n\n    css = (styles) => {\n      const $ = findDOMNode(this)\n      if (!$) return\n\n      this.$ = $\n      styles = flatObject(this.getStyles(styles))\n\n      Object\n        .entries(styles)\n        .forEach(([key, value]) => $.style.setProperty(`--${ key }`, value))\n    }\n\n    render() {\n      const props = { ...this.props }\n      delete props.rcv\n\n      return React.cloneElement(element, props)\n    }\n  }\n","import React, {\n  useEffect,\n  useRef,\n} from 'react'\nimport { connect } from 'react-redux'\nimport {\n  getDuration,\n} from '../../../store/selectors'\nimport rcv    from '../../../lib/rcv'\nimport styles from './styles.module.scss'\n\nconst G       = rcv(<g />)\nconst Rect    = rcv(<rect />)\nconst Polygon = rcv(<polygon />)\n\nexport default connect(\n  state => ({\n    duration: getDuration(state)\n  })\n)(\n  ({ duration, id, mask, animate, radiuses = {} }) => {\n    const _id   = type => `${ id }-${ type }`\n    const url   = type => `url(\"#${ _id(type) }\")`\n    const cpu   = { clipPathUnits: 'objectBoundingBox' }\n    const masks = Object.fromEntries(\n      ['shape', 'enter', 'leave']\n        .map(type => [type, mask[type](radiuses[type])])\n        .map(([type, mask]) => [type, {\n          points: mask.shape,\n          rcv   : { width: mask.width + 'px' }\n        }])\n    )\n\n    let $enter = useRef(null)\n    let $leave = useRef(null)\n    useEffect(() => {\n      $enter = $enter.current.$\n      $leave = $leave.current.$\n\n      if (animate === 'enter') {\n        $leave.classList.remove(styles.to)\n        $enter.classList.add   (styles.to)\n      }\n\n      if (animate === 'leave') {\n        $leave.classList.add(styles.to)\n        setTimeout(() => $enter.classList.remove(styles.to), duration)\n      }\n    })\n\n    return (\n      <G rcv={{ duration: duration + 'ms', angle: -mask.angle + 'deg' }}>\n        <clipPath id={ _id('mask') } clipPath={ url('shape') } { ...cpu }>\n          <Rect\n            className={ styles.mask }\n            rcv      ={{ radius: radiuses.radius }}\n            x=\"0\" width =\"1\"\n            y=\"0\" height=\"1\"\n          />\n        </clipPath>\n        <clipPath id={ _id('shape') } clipPath={ url('enter') } { ...cpu }>\n          <Polygon\n            className={ styles.shape       }\n            points   ={ masks.shape.points }\n          />\n        </clipPath>\n        <clipPath id={ _id('enter') } clipPath={ url('leave') } { ...cpu }>\n          <Polygon\n            className={ styles.from        }\n            points   ={ masks.enter.points }\n            rcv      ={ masks.enter.rcv    }\n            ref      ={ $enter             }\n          />\n        </clipPath>\n        <clipPath id={ _id('leave') } { ...cpu }>\n          <Polygon\n            className={ styles.from        }\n            points   ={ masks.leave.points }\n            rcv      ={ masks.leave.rcv    }\n            ref      ={ $leave             }\n          />\n        </clipPath>\n      </G>\n    )\n  }\n)\n","import {\n  Note,\n} from '../lib/music'\nimport {\n  __,\n  evolve,\n  map,\n  nth,\n  range,\n} from 'ramda'\n\nexport const getLayerRange =\n  ({ layers }) =>\n    range(0, layers.length)\n\nexport const getStringRange =\n  ({ tuning }) =>\n    range(0, tuning.length)\n\nexport const getBoxRange =\n  ({ from, to }) =>\n    range(from, to + 1)\n\nexport const getFrom =\n  ({ from }) =>\n    from\n\nexport const getDuration =\n  ({ duration }) =>\n    duration\n\nexport const getNote =\n  ({ tuning }, { string, box }) =>\n    Note.add(box)(tuning[tuning.length - 1 - string])\n\nexport const getLayer =\n  ({ layers, boxMasks, layerMasks, palettes, scales }, { layer }) =>\n    evolve(\n      {\n        boxMask   : nth(__, boxMasks),\n        layerMasks: map(nth(__, layerMasks)),\n        palette   : nth(__, palettes),\n        scale     : nth(__, scales),\n      },\n      layers[layer]\n    )\n","import React  from 'react'\nimport rcv    from '../../../lib/rcv'\nimport styles from './styles.module.scss'\n\nconst Rect = rcv(<rect />)\n\nconst defaults = {\n  color: 'transparent',\n}\n\nexport default ({ style, clip }) => (\n  <Rect\n    className={ styles.unit }\n    rcv={{ ...defaults, ...style, clip }}\n  />\n)\n","import React, {\n  useRef,\n}from 'react'\nimport { connect } from 'react-redux'\nimport {\n  getFrom,\n  getLayer,\n  getNote,\n} from '../../../store/selectors'\nimport { Scale } from '../../../lib/music'\nimport { Mask  } from '../../../lib/instrument'\nimport {\n  mathMod,\n} from 'ramda'\nimport styles    from './styles.module.scss'\nimport BoxMask   from '../BoxMask'\nimport BoxUnit   from '../BoxUnit'\n\nexport default connect(\n  (state, props) => {\n    const { layer, string, box } = props\n    const from = getFrom(state)\n    const note = getNote(state, props)\n    const {\n      MAX,\n      boxMask,\n      layerMasks,\n      palette,\n      root,\n      scale,\n    } = getLayer(state, props)\n\n    return {\n      MAX,\n      id   : `clip-${ layer }-${ string }-${ box }`,\n      mask : boxMask,\n      style: Mask.insideAny(string)(from + box)(layerMasks)\n        ? palette[Scale.getInterval(root)(note)(scale)] || null\n        : null\n    }\n  }\n)(\n  ({ MAX, id, mask, style, layer, string, box }) => {\n    const indexRef   = useRef(-1)\n    const units      = useRef(Array(MAX).fill({})).current\n    const hasPrevRef = useRef(false)\n    const hasPrev    = hasPrevRef.current\n    const prev       = indexRef.current\n    indexRef.current = mathMod(indexRef.current + 1, MAX)\n    const index      = indexRef.current\n\n    // Syncing radiuses\n    const radius     = style ? style.radius : null\n    const prevRadius = hasPrev\n      ? units[prev].radiuses.radius\n      : null\n    const syncedRadius = Math.min(\n      radius     !== null ? radius     : prevRadius,\n      prevRadius !== null ? prevRadius : radius\n    )\n\n    // Enter current box\n    if (style)\n      units[index] = {\n        style,\n        animate : 'enter',\n        radiuses: { radius, enter: syncedRadius }\n      }\n\n    // Leave previous box\n    if (hasPrev) {\n      units[prev].animate = 'leave'\n      units[prev].radiuses.leave = syncedRadius\n    }\n\n    hasPrevRef.current = !!style\n\n    return (\n      <box className={ styles.box }>\n        <svg className={ styles.svg }>\n          <defs>\n            { units.map(({ animate, radiuses }, key) => (\n              <BoxMask\n                key     ={ key }\n                id      ={ `${ id }-${ key }` }\n                mask    ={ mask     }\n                animate ={ animate  }\n                radiuses={ radiuses }\n              />\n            )) }\n          </defs>\n          { units.map(({ style }, key) => (\n            <BoxUnit\n              key  ={ key   }\n              style={ style }\n              clip ={ `url(\"#${ id }-${ key }-mask\")` }\n            />\n          )) }\n        </svg>\n      </box>\n    )\n  }\n)\n","import React           from 'react'\nimport { connect }     from 'react-redux'\nimport {\n  getBoxRange,\n} from '../../../store/selectors'\nimport styles from './styles.module.scss'\nimport Box    from '../Box'\nimport {\n  applySpec,\n  map,\n} from 'ramda'\n\nexport default connect(\n  applySpec({\n    range: getBoxRange\n  })\n)(\n  ({ range, string, layer }) => (\n    <string className={ styles.string }>\n      { map(i => (\n        <Box\n          key    ={ i      }\n          box    ={ i      }\n          string ={ string }\n          layer  ={ layer  }\n        />\n      ))(range) }\n    </string>\n  )\n)\n","import React        from 'react'\nimport { connect }  from 'react-redux'\nimport {\n  getStringRange,\n} from '../../../store/selectors'\nimport styles from './styles.module.scss'\nimport String from '../String'\nimport {\n  applySpec,\n  map,\n} from 'ramda'\n\nexport default connect(\n  applySpec({\n    range: getStringRange\n  })\n)(\n  ({ range, layer }) => (\n    <layer className={ styles.layer }>\n      { map(i => (\n        <String\n          key    ={ i     }\n          string ={ i     }\n          layer  ={ layer }\n        />\n      ))(range) }\n    </layer>\n  )\n)\n","import React       from 'react'\nimport { connect } from 'react-redux'\nimport {\n  getLayerRange,\n} from '../../../store/selectors'\nimport styles from './styles.module.scss'\nimport Layer  from '../Layer'\nimport {\n  applySpec,\n  map,\n} from 'ramda'\n\nexport default connect(\n  applySpec({\n    range: getLayerRange,\n  })\n)(\n  ({ range }) => (\n    <guitar className={ styles.guitar }>\n      { map(i => (\n        <Layer\n          key  ={ i }\n          layer={ i }\n        />\n      ))(range) }\n    </guitar>\n  )\n)\n","import React from 'react'\nimport Guitar from './instrument/Guitar'\n\nexport default () => (<Guitar></Guitar>)\n","import {\n  is,\n  isNil,\n  map,\n  pipe,\n  reject,\n  when,\n} from 'ramda'\n\n//** Removes nulls and undefineds recursively on object o\n//:: Object o -> Object o\nconst cleanNilsRecurs =\n  when(                      // when\n    is(Object),              // value is object\n    pipe(\n      reject(isNil),         // remove nulls and undefineds\n      map(_ => cleanNilsRecurs(_)) // and recurse on children\n    )\n  )\n\nexport default cleanNilsRecurs\n","import { cleanNilsRecurs } from '../lib/utils'\nimport {\n  __,\n  defaultTo,\n  identity,\n  assocPath,\n  compose,\n  curry,\n  lensPath,\n  over,\n  reduce,\n  uncurryN,\n} from 'ramda'\n\n//--\n//   Utils\n//--\n\n//** Returns state with actions applied\n//:: Object state -> Array actions -> Object state\nconst assocPathReduce =\n  reduce(\n    (state, { path, value }) =>\n      assocPath(path, value, state)\n  )\n\n//** Returns state with paths (recursively) clean of nils\n//:: Object state -> Array paths -> Object state\nconst cleanNilsReduce =\n  reduce(\n    (state, path) =>\n      over(lensPath(path), cleanNilsRecurs, state)\n  )\n\n//--\n//   Reducers\n//--\n\n//** Reducers keyed by action type\n//:: Object String actionType Function reducer\nconst reducers = {\n  //** Applies actions and clean arrays\n  //:: Object state -> Array actions -> Object state\n  next: curry(uncurryN(2,\n    state =>\n      compose(\n        cleanNilsReduce(__, [['tuning'], ['layers']]),\n        assocPathReduce(state)\n      )\n  )),\n}\n\n//** Reduces state with action\n//:: (Object state, Object action) -> Object state\nexport default\n  (state, { type, payload }) =>\n    // defaultTo(identity, reducers[type])(state, payload)\n    console.log('reducing', type, payload, state) ||\n    compose(\n      window.__D('-> state'),\n      defaultTo(identity, reducers[type])\n    )(state, payload)\n","export default class Point {\n  constructor({ x = 0, y = 0 } = {}) {\n    this.x = x || 0\n    this.y = y || 0\n  }\n\n  opposite() {\n    return this.clone(coord => -coord)\n  }\n\n  translate(vector = new Point()) {\n    return new Point({\n      x: this.x + vector.x,\n      y: this.y + vector.y\n    })\n  }\n\n  scale(value = new Point(), origin = new Point()) {\n    if (typeof value === 'number')\n      value = new Point({ x: value, y: value })\n\n    return origin\n      .translate(\n        this\n          .translate(origin.opposite())\n          .clone((coord, axis) => coord * value[axis])\n      )\n  }\n\n  rotate(angle = 0, center = new Point()) { // angle: clockwise degrees\n    const rad = - 2 * Math.PI * angle / 360\n    const cos = Math.cos(rad)\n    const sin = Math.sin(rad)\n\n    const d = this.translate(center.opposite())\n    const x = d.x * cos - d.y * sin\n    const y = d.x * sin + d.y * cos\n\n\n    return center\n      .translate(new Point({ x, y }))\n      .round(5)\n  }\n\n  round(precision = 1) {\n    return this.clone(\n      coord =>\n        (Math.round(coord * Math.pow(10, precision)) / Math.pow(10, precision)) || 0\n    )\n  }\n\n  quarterify(size = new Point(), fn = _ => _) {\n    const point  = this.clone()\n    const center = size.clone(coord => coord / 2)\n\n    const angle = (() => {\n      const [px, py, cx, cy] = [point.x, point.y, center.x, center.y]\n\n      if (px > cx && py > cy) return 0\n      if (px < cx && py > cy) return -90\n      if (px < cx && py < cy) return -180\n      return -270\n    })()\n\n    const transform = point => point.rotate(-angle, center).translate(center.opposite()).scale(2)\n    const inverse   = point => point.scale(1/2).translate(center).rotate(angle, center)\n\n    return inverse(fn(transform(point)))\n  }\n\n  clone(fn = _ => _) {\n    return new Point({ x: fn(this.x, 'x'), y: fn(this.y, 'y') })\n  }\n\n  toString(unit = '', sep = ',') {\n    return `${ this.x }${ unit }${ sep }${ this.y }${ unit }`\n  }\n\n  static intersection(\n    { x: x1, y: y1 } = new Point(),\n    { x: x2, y: y2 } = new Point(),\n    { x: x3, y: y3 } = new Point(),\n    { x: x4, y: y4 } = new Point()\n  ) {\n    const a    = x1 * y2 - y1 * x2\n    const b    = x3 * y4 - y3 * x4\n    const xNum = a * (x3 - x4) - b * (x1 - x2)\n    const yNum = a * (y3 - y4) - b * (y1 - y2)\n    const den  = (x1 - x2) * (y3 - y4) - (y1 - y2) * (x3 - x4)\n\n    const x = xNum / den\n    const y = yNum / den\n\n    return new Point({ x, y })\n  }\n}\n","import Point from './Point'\n\nexport default class Polygon {\n  points = []\n\n  constructor(points = []) {\n    this.points = points\n  }\n\n  translate(vector = new Point()) {\n    return this.clone(point => point.translate(vector))\n  }\n\n  rotate(angle = 0, center = new Point()) {\n    return this.clone(point => point.rotate(angle, center))\n  }\n\n  scale(value = new Point(), origin = new Point()) {\n    return this.clone(point => point.scale(value, origin))\n  }\n\n  boundingBox() {\n    const first = this.points[0] || new Point()\n\n    const { minX, maxX, minY, maxY } = this.points\n      .reduce(\n        (carry, point) => ({\n          minX: Math.min(carry.minX, point.x),\n          maxX: Math.max(carry.maxX, point.x),\n          minY: Math.min(carry.minY, point.y),\n          maxY: Math.max(carry.maxY, point.y)\n        }),\n        { minX: first.x, maxX: first.x, minY: first.y, maxY: first.y }\n      )\n\n    return new Polygon([\n      new Point({ x: minX, y: minY }),\n      new Point({ x: maxX, y: minY }),\n      new Point({ x: maxX, y: maxY }),\n      new Point({ x: minX, y: maxY })\n    ])\n  }\n\n  clone(fn = _ => _) {\n    return new Polygon(\n      this.points.map(\n        (point, i) => fn(point.clone(), i)\n      )\n    )\n  }\n\n  toString() {\n    return this.points.map(point => point.toString()).join(' ')\n  }\n\n  // Sutherland–Hodgman algorithm\n  // @see https://www.geeksforgeeks.org/polygon-clipping-sutherland-hodgman-algorithm-please-change-bmp-images-jpeg-png/\n  crop(area = new Polygon()) {\n    const points = area.points\n    const length = points.length\n\n    return points.reduce(\n      (polygon, I, i) => polygon.cropLine(I, points[(i + 1) % length]),\n      this\n    )\n  }\n\n  cropLine({ x: x1, y: y1 } = new Point(), { x: x2, y: y2 } = new Point()) {\n    const points = this.clone().points\n    const length = points.length\n\n    const p1 = new Point({ x: x1, y: y1 })\n    const p2 = new Point({ x: x2, y: y2 })\n\n    // Doubles some points (eg for diamond 1)\n    const inside = pos => pos > 0\n\n    return points.reduce(\n      (polygon, I, i) => {\n        const J = points[(i + 1) % length]\n        const { x: xI, y: yI } = I\n        const { x: xJ, y: yJ } = J\n\n        const iPos = (x2 - x1) * (yI - y1) - (y2 - y1) * (xI - x1)\n        const jPos = (x2 - x1) * (yJ - y1) - (y2 - y1) * (xJ - x1)\n        const iIns = inside(iPos)\n        const jIns = inside(jPos)\n\n        if (iIns && jIns) {\n          polygon.points.push(J)\n        } else if (!iIns && jIns) {\n          polygon.points.push(Point.intersection(p1, p2, I, J))\n          polygon.points.push(J)\n        } else if (iIns && !jIns) {\n          polygon.points.push(Point.intersection(p1, p2, I, J))\n        }\n\n        return polygon\n      },\n      new Polygon()\n    )\n  }\n}\n","import Polygon from './Polygon'\nimport Point from './Point'\n\nexport default class Rectangle extends Polygon {\n  constructor(size = new Point()) {\n    super()\n\n    this.points = [\n      new Point(),\n      new Point({ x: size.x }),\n      new Point({ x: size.x, y: size.y }),\n      new Point({ y: size.y }),\n    ]\n  }\n}\n","import Polygon from './Polygon'\nimport Point from './Point'\n\nexport default class Triangle extends Polygon {\n  constructor(size = new Point()) {\n    super()\n\n    this.points = [\n      new Point(),\n      new Point({ x: size.x }),\n      new Point({ y: size.y }),\n    ]\n  }\n}\n","import settable from '../utils/settable'\nimport Point from './Point.js'\nimport Rectangle from './Rectangle.js'\nimport Triangle from './Triangle.js'\n\nconst e    = .02\nconst sq2  = Math.sqrt(2)\nconst far  = s => (1 - s)\nconst mid  = s => (1 - s) / 2\nconst diag = s => ({ size: { x: sq2 * s, y: sq2 }, translate: { x: mid(sq2 * s), y: mid(sq2) } })\n\nconst SHAPES = {\n  rect: {\n    _constructor: Rectangle,\n    top         : s => ({ size: { y: s } }),\n    horizontal  : s => ({ size: { y: s }, translate: { y: mid(s) } }),\n    bottom      : s => ({ size: { y: s }, translate: { y: far(s) } }),\n    left        : s => ({ size: { x: s } }),\n    vertical    : s => ({ size: { x: s + e }, translate: { x: mid(s + e) } }),\n    right       : s => ({ size: { x: s }, translate: { x: far(s) } }),\n    topleft     : s => ({ size: s }),\n    topright    : s => ({ size: s, translate: { x: 1 / 2 } }),\n    bottomleft  : s => ({ size: s, translate: { y: 1 / 2 } }),\n    bottomright : s => ({ size: s, translate:      1 / 2   }),\n    diamond     : s => ({ size: s, rotate: 45, scale: 1 / sq2 }),\n    diagasc     : s => ({ ...diag(s), rotate: -45 }),\n    diagdesc    : s => ({ ...diag(s), rotate:  45 }),\n  },\n  triangle: {\n    _constructor: Triangle,\n    topleft     : s => ({ size: 2 * s + e }),\n    topright    : s => ({ size: 2 * s + e, scale: { x: -1, y:  1 } }),\n    bottomleft  : s => ({ size: 2 * s + e, scale: { x:  1, y: -1 } }),\n    bottomright : s => ({ size: 2 * s + e, scale: { x: -1, y: -1 } }),\n  },\n}\n\nconst TRANSITIONS = {\n  east     : 0,\n  northeast: 1,\n  north    : 2,\n  northwest: 3,\n  west     : 4,\n  southwest: 5,\n  south    : 6,\n  southeast: 7,\n}\n\nconst getSize = polygon => {\n  const bb = polygon.boundingBox()\n  const tl = bb.points[0]\n  const br = bb.points[2]\n\n  return new Point({ x: br.x - tl.x, y: br.y - tl.y })\n}\n\nconst SUBTYPES = Object.fromEntries(\n  Object.entries(SHAPES)\n    .map(\n      ([type, data]) => [\n        type,\n        Object.keys(data).filter(subtype => subtype !== '_constructor')\n      ]\n    )\n)\n\nconst DEFAULTS = {\n  size      : 1,\n  type      : 'rect',\n  subtype   : 'top',\n  transition: 'east'\n}\n\nexport default class Mask extends settable({ DEFAULTS, after: '_set' }) {\n  static TYPES       = Object.keys(SUBTYPES)\n  static SUBTYPES    = SUBTYPES\n  static TRANSITIONS = Object.keys(TRANSITIONS)\n  angle\n  _shape\n  _size\n  _type\n  _subtype\n  _transition\n\n  constructor({ size, type, subtype, transition } = {}) {\n    super({ size, type, subtype, transition })\n  }\n\n  _set() {\n    this._shape = this._getShape().crop(new Rectangle({ x: 1, y: 1 }))\n    this.angle  = this._getAngle()\n  }\n\n  shape() {\n    return { shape: this._shape }\n  }\n\n  enter(radius) {\n    return this._get(radius, w => new Point({ x: -w, y: 0 }))\n  }\n\n  leave(radius) {\n    return this._get(radius)\n  }\n\n  _get(radius, start = _ => new Point()) {\n    // css has max radius=.5, hence *2\n    const s     = 2 * (radius || 0) * (1 - sq2) + sq2 // +e?\n    const clip  = new Rectangle({ x: s, y: s })\n      .translate(new Point({ x: (1 - s) / 2, y: (1 - s) / 2 }))\n\n    if (radius === undefined)\n      return { shape: clip, width: sq2 }\n\n    const shape = this._shape\n      .rotate(-this.angle, new Point({ x: .5, y: .5 }))\n      .crop(clip)\n      .boundingBox()\n    const width = getSize(shape).x\n\n    return {\n      shape: shape.translate(start(width)),\n      width\n    }\n  }\n\n  _getShape() {\n    if (!Mask.TYPES.includes(this._type))\n      throw new Error(`Invalid type \"${ this._type }\" (${ Mask.TYPES.join(', ') })`)\n\n    if (!Mask.SUBTYPES[this._type].includes(this._subtype))\n      throw new Error(`Invalid subtype \"${ this._subtype }\" for type \"${ this._type }\" (${ Mask.SUBTYPES[this._type].join(', ') })`)\n\n    const constructor = SHAPES[this._type]._constructor\n    const data        = SHAPES[this._type][this._subtype](this._size)\n    let { size, translate, rotate, scale } = Object.assign({\n      size     : {},\n      translate: {},\n      rotate   : 0,\n      scale    : {},\n    }, data)\n\n    if (typeof size      === 'number') size      = { x: size     , y: size      }\n    if (typeof translate === 'number') translate = { x: translate, y: translate }\n    if (typeof scale     === 'number') scale     = { x: scale    , y: scale     }\n\n    size      = Object.assign({ x: 1, y: 1 }, size)\n    translate = Object.assign({ x: 0, y: 0 }, translate)\n    scale     = Object.assign({ x: 1, y: 1 }, scale)\n\n    const center = new Point({ x: 1/2, y: 1/2 })\n    return new constructor(new Point(size))\n      .translate(translate)\n      .rotate   (rotate, center)\n      .scale    (scale , center)\n  }\n\n  _getAngle() {\n    if (!Mask.TRANSITIONS.includes(this._transition))\n      throw new Error(`Invalid transition \"${ this._transition }\" (${ Mask.TRANSITIONS.join(', ') })`)\n\n    return TRANSITIONS[this._transition] * 45\n  }\n}\n","import { createStore } from 'redux'\nimport reducer         from './reducer'\nimport { Mask }        from '../lib/polygon'\n\n/* SHIT start */\nconst intervals = [\n  '1', 'b2', '2', '#2', 'b3', '3', 'b4', '4',\n  '#4', 'b5', '5', '#5', 'b6', '6', 'bb7', 'b7', '7'\n]\n\nconst palettes = [\n  Object.fromEntries(\n    intervals.map(\n      (i, ind) =>\n        [i, {\n          color : `hsl(${ 360 * ind / intervals.length }, 50%, 50%)`,\n          radius: ind % 3 === 0 ? .5 : 0,\n        }]\n    )\n  ),\n  Object.fromEntries(\n    intervals.map(i => [i, { color: 'red', radius: 0 }])\n  ),\n]\n\nconst scales = [\n  ['1', '2', '3', '4', '5', '6', '7']\n]\n\nconst boxMasks = [\n  new Mask({ size: 1, type: 'rect', subtype: 'diamond' }),\n  new Mask({ size: .25, type: 'triangle', subtype: 'topleft', transition: 'southeast' }),\n  new Mask({ size: .25, type: 'triangle', subtype: 'topright', transition: 'southwest' }),\n  new Mask({ size: .25, type: 'triangle', subtype: 'bottomleft', transition: 'northeast' }),\n  new Mask({ size: .25, type: 'triangle', subtype: 'bottomright', transition: 'northwest' }),\n]\n\nconst layerMasks = [\n  [\n    [[-Infinity, 8], [8, Infinity]],\n    [[-Infinity, 8], [8, Infinity]],\n    [[-Infinity, 8], [8, Infinity]],\n    [[-Infinity, 8], [8, Infinity]],\n    [[-Infinity, 8], [8, Infinity]],\n    [[-Infinity, 8], [8, Infinity]],\n  ]\n]\n/* SHIT end */\n\nconst initial = {\n  tuning  : ['E', 'A', 'D', 'G', 'B', 'E'],\n  from    : 0,\n  to      : 12,\n  duration: 500,\n  layers: [\n    {\n      MAX: 2,\n      boxMask: 0,\n      layerMasks: [0],\n      palette: 0,\n      root: 'C',\n      scale: 0,\n    },\n    {\n      MAX: 2,\n      boxMask: 1,\n      layerMasks: [0],\n      palette: 0,\n      root: 'D',\n      scale: 0,\n    },\n    {\n      MAX: 2,\n      boxMask: 2,\n      layerMasks: [0],\n      palette: 0,\n      root: 'E',\n      scale: 0,\n    },\n    {\n      MAX: 2,\n      boxMask: 3,\n      layerMasks: [0],\n      palette: 0,\n      root: 'F',\n      scale: 0,\n    },\n    {\n      MAX: 2,\n      boxMask: 4,\n      layerMasks: [0],\n      palette: 0,\n      root: 'G',\n      scale: 0,\n    },\n  ],\n  boxMasks,\n  layerMasks,\n  palettes,\n  scales\n}\n\nconst store = createStore(\n  reducer,\n  initial,\n  window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__()\n)\n\nconst dispatch =\n  (roots, palettes) =>\n    store.dispatch({\n      type: 'next',\n      payload:\n      roots\n        .map((root, i) => ({\n          path: ['layers', i, 'root'],\n          value: root\n        }))\n        .concat(\n          palettes\n            ? palettes.map((palette, i) => ({\n                path: ['layers', i, 'palette'],\n                value: palette\n              }))\n            : []\n        )\n    })\n\nwindow.dispatch = dispatch\nconst cycle = arr => {\n  arr = arr.concat([arr.shift()])\n  arr = arr.concat([arr.shift()])\n  return arr\n}\nlet roots = ['C', 'D', 'E', 'F', 'G']\ntrue && setTimeout(() => {\n  window.intervalID = setInterval(() => dispatch(roots = cycle(roots)), 2000)\n}, 1000)\n\nwindow.store = store\nexport default store\n","import React                 from 'react'\nimport ReactDOM              from 'react-dom'\nimport { Provider }          from 'react-redux'\nimport registerServiceWorker from './registerServiceWorker'\n\nimport            './polyfills'\nimport App   from './components/App'\nimport store from './store/'\n\nsetTimeout(() => {\n  ReactDOM.render((\n    <Provider store={ store }>\n      <App />\n    </Provider>\n  ),\n    document.getElementById('root'))\n  registerServiceWorker()\n}, 500)\n"],"sourceRoot":""}